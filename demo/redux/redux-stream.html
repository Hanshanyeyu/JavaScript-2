<!DOCTYPE html>
<html lang="cn">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Redux Stream</title>
    <script src="https://cdn.bootcss.com/redux/3.7.2/redux.min.js"></script>
</head>

<body>
    <script>
        /**
         * Action Creators
         * @method increment, decrement
         * @return {Object} Action
         */
        function increment() {
            return {
                type: 'INCREMENT'
            };
        }

        function decrement() {
            return {
                type: 'DECREMENT'
            };
        }

        /**
         * Reducer
         * @method reducer
         * @param  {Objcet} state
         * @param  {Objcet} action
         * @return {Objcet} nextState
         */
        function reducer(state, action) {
            // 首次调用设置初始 state
            state = state || {
                counter: 0
            };

            switch (action.type) {
                case 'INCREMENT':
                    return {
                        counter: state.counter + 1
                    };
                case 'DECREMENT':
                    return {
                        counter: state.counter - 1
                    };
                default:
                    return state;
            }
        }

        /**
         * Store
         * @type {Object}
         */
        const store = Redux.createStore(reducer);

        // 初始化 state
        const state = store.getState();

        // 更新 state
        store.dispatch(increment());
        const state1 = store.getState();

        // 更新 state
        store.dispatch(increment());
        const state2 = store.getState();

        // 更新 state
        store.dispatch(decrement());
        const state3 = store.getState();


        const printState = (state) => console.log(JSON.stringify(state));
        printState(state);
        printState(state1);
        printState(state2);
        printState(state3);
    </script>
</body>

</html>
